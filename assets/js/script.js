const plusBtn=document.querySelector(".control-bar a"),colorBar=document.querySelector(".control-bar .bar"),colorsElements=document.querySelectorAll(".control-bar .bar .color"),addModal=document.querySelector(".add-modal"),titleInput=addModal.querySelector("input"),bodyInput=addModal.querySelector("textarea"),addBtn=document.getElementById("add-btn"),updateBtn=document.getElementById("update-btn");let selectedColor=null,notes=[];function toggleColorBar(){colorBar.classList.toggle("show"),setTimeout(()=>{colorsElements.forEach(e=>{e.classList.toggle("op-1")})},600)}function addNote(){var e=titleInput.value.trim(),t=bodyInput.value.trim();if(""!==e&&""!==t){const o=generateUniqueSlug(e);notes.find(e=>e.slug===o)?alert("Note already exists"):(e={slug:o,title:e,body:t,color:selectedColor},notes.push(e),localStorage.setItem("notes",JSON.stringify(notes)))}}function displayNotes(){const t=document.querySelector(".notes-container");t.innerHTML="",notes.forEach(e=>{e=createNoteElement(e),t.appendChild(e)})}function createNoteElement(e){var t=document.createElement("div");return t.classList.add("note"),t.classList.add("note-"+e.color),t.innerHTML=`
        <div>
            <h2>${e.title}</h2>
            <p>${e.body}</p>
        </div>
        <div class="flex flex-between">
            <button class="delete-btn" onclick="deleteNote('${e.slug}')">
                <img src="assets/img/trash.png">
            </button>
            <button class="update-btn" onclick="showUpdateModal('${e.slug}', '${e.color}')">
                <img src="assets/img/edit.png">
            </button>
        </div>  
    `,t}function deleteNote(t){var e=notes.findIndex(e=>e.slug===t);-1!==e&&(notes.splice(e,1),localStorage.setItem("notes",JSON.stringify(notes)),displayNotes())}function showUpdateModal(t,e){var o=notes.findIndex(e=>e.slug===t);addBtn.style.backgroundColor=`var(--color-${e})`,titleInput.value=notes[o].title,bodyInput.value=notes[o].body,addBtn.classList.add("hide-btn"),updateBtn.classList.remove("hide-btn"),updateBtn.dataset.index=o,showModal(o)}function handleUpdate(e){var t=titleInput.value.trim(),o=bodyInput.value.trim();if(t!==notes[e].title){console.log("ff");const n=generateUniqueSlug(t);if(notes.find(e=>e.slug===n))return void alert("Note with the same title already exists");notes[e].title=t,notes[e].slug=n}notes[e].body=o,localStorage.setItem("notes",JSON.stringify(notes)),displayNotes(),resetInputFields(),hideModal()}function resetInputFields(){titleInput.value="",bodyInput.value=""}function generateUniqueSlug(e){return e.toLowerCase().replace(/\s+/g,"-")}plusBtn.addEventListener("click",toggleColorBar),colorsElements.forEach(e=>{e.addEventListener("click",()=>{selectedColor=e.getAttribute("data-color"),updateBtn.classList.add("hide-btn"),addBtn.classList.remove("hide-btn"),showModal()})}),document.querySelector(".overlay").addEventListener("click",hideModal),addBtn.addEventListener("click",()=>{addNote(),displayNotes(),resetInputFields(),hideModal()}),notes=JSON.parse(localStorage.getItem("notes"))||[],displayNotes(),updateBtn.addEventListener("click",()=>handleUpdate(updateBtn.dataset.index)),document.querySelector(".delete-all-btn").addEventListener("click",()=>{notes=[],localStorage.setItem("notes",JSON.stringify(notes)),displayNotes()});